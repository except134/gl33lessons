#summary Урок 3 - Вращающийся куб с текстурой с использованием OpenGL 3.3
#labels Tutorial

= Урок 3 - Вращающийся куб с текстурой с использованием OpenGL 3.3 =

== Введение ==

В этом уроке будут рассмотрены: системы координат OpenGL, создание VBO для данных вершин куба, создание индексного буфера, показана работа с матрицами, а также пример загрузки и работы с текстурой.

== Системы координат OpenGL ==

В ранних версиях OpenGL, предшествующих версии 3, была облегчена работа с матрицами преобразований. В частности разработчик мог использовать _стек матриц_ в различных режимах работы с матрицами. Режим работы задавался с помощью функции `glMatrixMode`, например можно было задать режим `GL_MODELVIEW` или `GL_PROJECTION`, который давал доступ к модельно-видовой (`ModelView`) и проекционной (`Projection`) матрицам, соответственно. Для работы со стеком матриц предназначались функции `glPushMatrix` и `glPopMatrix`. Однако в OpenGL версии 3 и выше все эти функции были объявлены устаревшими и исключены из API.

Координаты объекта, в режиме FFP (Fixed Function Pipeline), проходили следующие преобразования системы координат:
  # Локальные координаты преобразуются матрицей `ModelView` в видовые (eye space)
  # Видовые преобразуются матрицей `Projection` в однородные (clip space)
  # Однородные `(X,Y,Z,W)` преобразуются в нормализованные `(X/W, Y/W, Z/W, 1)`
  # Нормализованные преобразуются параметрами `Viewport` в экранные (screen space)

В OpenGL 3.3 за первые два пункта теперь отвечает разработчик: используя шейдерную программу он должен перевести локальные координаты объекта в однородные. Каким образом он это сделает - неважно, он может эмулировать старую схему или придумать что-то свое, главное получить однородные координаты.

Однородные координаты называются так неспроста, они переводят все имеющиеся координаты в единое пространство, ограниченное по всем осям системы координат параметром `W`. В итоге, после перевода однородных координат в нормализованные, любые координаты вершин, которые необходимо отобразить, находятся в пределах `[-1, 1]` по всем трем осям нормализованной системы координат. Если координаты вершины не попадают в этот интервал - вершина отбрасывается.